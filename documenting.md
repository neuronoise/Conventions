## Рекомендации по документированию кода
Документирование рекомендуется производить с использованием разметки системы документирования [doxyden](https://www.doxygen.nl/index.html).

#### Блоки
Документация кода в Doxygen осуществляется при помощи _документирующего блока_. Блоки бывают односторочные и многострочные. 
Для документирования рекомендуется использовать следующий стиль многострочных блоков:
```
   /**
    * ... первая строчка ...
    * ... вторая строчка ...
    * ... и т.д.
    */
```

Обратите внимание на то, что текст, написанный в таком комментарии, будет относится к подробному описанию. Для указания краткого описания может быть использована команда ```@brief```. 
Указанный после команды текст (вплоть до конца параграфа) будет относится к краткому описанию, и для отделения подробного и краткого описания используется пустая строка.
```
/**
 * @brief Краткое описание и
 *                его продолжение.
 *
 *    Подробное описание                  
 */
 ```

Существует также однострочный блок. Текст в таком блоке будет относится к краткому описанию
```
/// Краткое описание
```

Допускается использовать однострочный блок в случае, если комментарий умецается в нем. В остальных случаях необходимо использовать многострочные блоки.

Документирующий блок предваряет документируемый элемент. Однако, иногда бывают ситуации, когда удобнее разместить его после документируемого элемента. 
Для этого необходимо в блок добавить маркер ```<```:
```
int variable; ///< Краткое описание
```

#### Документирование функций и методов
Для указания параметров необходимо использовать команду ```@param``` для каждого из параметров функции, при этом синтаксис команды имеет следующий вид:
```
@param [<направление>] <идентификатор> {описание_параметра}
```
Значение компонентов команды:
- **Идентификатор** – имя, под которым данный параметр известен в документируемом коде;
- **Описание параметра** – простое текстовое описание используемого параметра..
- **Направление** – опциональный атрибут,  показывает назначение параметра, может иметь три значения ```[in]```, ```[out]```, ```[in,out]```;

Для описания возвращаемого значения используется команда ```@return```. Её синтаксис имеет следующий вид:
```
@return {описание_возвращаемого_значения}
```
#### Документирование перечислений 
Перечисления должны документироваться следующим образом:
```
/// Набор возможных состояний объекта
enum States {
         Disabled, ///< Указывает, что элемент недоступен для использования
         Undefined, ///< Указывает, что состояние элемента неопределенно
         Enabled, ///< Указывает, что элемент доступен для использования
}
```

### Блоки кода
Если внутри пояснения к документации необходимо для примера добавить код, можно воспользоваться командами ```@code``` и ```@endcode```:
```
\code [ {<расширение>}]
     ...
\endcode
```
Используемый язык определяется автоматически в зависимости от расширения файла, в котором располагается документирующий блок, 
однако в случае, если такое поведение не соответствует ожиданиям расширение можно указать явно.

Также существуют команды ```@include``` и ```@snippet```, которые позволяют вставить файл или его фрагмент в качестве кода.
Команда @include полностью копирует содержимое файла и вставляет его в документацию как блок кода:
```
\include <имя_файла>
```
Формат команды @snippet несколько другой:
```
\snippet <имя_файла> ( имя_фрагмента )
```
Для выделения определенного фрагмента кода необходимо в начале и в конце его разместить документирующий блок с указанием имени фрагмента:
```
/// [ имя_фрагмента ]
    ...
/// [ имя_фрагмента ]
```
#### Группы
В целях структурирования документации для создания описаний можно применять группы, или модули ([подробнее](https://www.doxygen.nl/manual/grouping.html)). 
Документация, занесенная в группы, отображается на соответствующей вкладке.

Для объявления группы рекомендуется использовать команду ```@defgroup```, которую необходимо заключить в документирующий блок:
```
@defgroup <идентификатор> (заголовок группы)
```
Идентификатор группы представляет собой уникальное слово, написанное на латинице, который впоследствии будет использован для обращения к данной группе; 
заголовок группы – это произвольное слово или предложение (желательно краткое) которое будет отображаться в документации.
Обратите внимание на то, что при описании модуля можно дополнить его кратким и подробным описанием, что позволяет раскрыть назначение того или иного модуля.

Для того, чтобы отнести тот или иной документируемый элемент в группу, существуют два подхода. Первый подход – это использование команды ```@ingroup```:
```
@ingroup <идентификатор> (заголовок группы)
```

Данную команду необходимо добавлять в документирующие блоки _**каждого**_ элемента исходного кода, относящегося к группе.

Второй подход состоит в использовании команд начала и конца группы: ```@{``` и ```@}```. 
```
/*! @defgroup <идентификатор> (заголовок группы)
    @{
*/
  документируемые_элементы
/*! @} */
```
Смысл прост: сначала объявляется группа, а затем к ней добавляются определенные документируемые элементы, которые нужно обрамить с помощью символов начала и конца группы.

Группа должна определяться один раз, причём это объявление будет только в одном файле. 
В случае, когда элементы одной группы разнесены по разным файлым, возникает необходимость использования команды ```@addtogroup```, 
которая не переопределяет группу, а добавляет к ней тот или иной элемент:
```
/*! @addtogroup <идентификатор> [(заголовок группы)]
    @{
*/
   документируемые_элементы
/*! @} */
```

Заголовок указывать необязательно. Он необходим в случае, если данная команда использована как аналог команды ```@defgroup``` - и, если соответствующая группа не была определена, 
то она будет создана с соответствующим названием и идентификатором. 

#### Титульная страница
С помощью команды ```@mainpage``` можно добавить документирующий блок на главную страницу. 
Если команда будет расположена в нескольких файлах, то все блоки будут объединены в общий «титульный» блок.
```
@mainpage <заголовок>
```
Подробнее можно ознакомиться [здесь](https://www.doxygen.nl/manual/commands.html#cmdmainpage).

#### Оформление
Doxygen поддерживает язык разметки [Markdown](https://www.markdownguide.org/). 
В целях создания красивого оформления документации можно использовать любые возможности этого языка - заголовки, выделение, таблицы и пр.

#### Описание
Дополнительно можно внести в документацию подробные описания. Для этого нужно создать с папке с исходными кодами файл с расширением .md (markdown). 
Файл с соответствующим названием будет добавлен к ссылкам, которые отображаются на отдельной вкладке "Описания". 

#### Команды
Далее приведены некоторые дополнительные команды (полный список можно увидеть [здесь](https://www.doxygen.nl/manual/commands.html))

| Команда    | Описание                                                                                                  |
| ---------- | --------------------------------------------------------------------------------------------------------- |
| @authors   | Указывает автора или авторов                                                                              |
| @version   | Используется для указания версии                                                                          |
| @date      | Предназначена для указания даты разработки                                                                |
| @bug       | Перечисление известных ошибок                                                                             |
| @warning   | Предупреждение для использования                                                                          |
| @copyright | Используемая лицензия                                                                                     |
| @example   | Команда, добавляемая в комментарий для указания ссылки на исходник с примером (добавляется после команды) |
| @todo      | Команда, используется для описания тех изменений, которые необходимо будет сделать (TODO)                 |

#### Пример использования
Документирование класса
```c++
/**
 * @brief Временная шкала.
 * 
 * Класс, реализующий создание временной шкалы и управление ей.
 */
class Timeline : public Item
{
public:
    Timeline();
    /// Отрисовка шкалы
    void draw(QPainter *painter) const;
    /**
     * Установка текущего времени
     * @param now: текущее время, сек.
     * @return true, если значение изменилось.
     */
    bool setNow(int now);
    /**
     * Установка продолжительности выставки
     * @param total: общая продолжительность выставки, сек.
     * @return true, если значение изменилось.
     */
    bool setTotal(int total);
    /**
     * Расчет позиции на временной шкале.
     * @param time: время, сек.
     * @return -1, если размеры временной шкалы не валидны, или не установлена общая
     * продолжительность выставки, иначе вернет координату X на временной
     * шкале.
     */
    double position(int time) const;
    /// Запрос ширины временной шкалы.
    int width() const;
    /// Запрос высоты временной шкалы.
    int height() const;

    // Item interface funtion
    void setVPosition(const double &){}
    /// Задать геометрические размеры шкалы
    void setSize(const QSize &size);

    /// Задать цвет фона
    static void setBgColor(const QColor &bgColor);
    /// Задать цвет шкалы пройденного времени
    static void setDoneColor(const QColor &doneColor);
    /// Задать цвет текста
    static void setTextColor(const QColor &textColor);

private:
    static QColor m_bgColor;    ///< Цвет фона.
    static QColor m_doneColor;  ///< Цвет пройденного времени.
    static QColor m_textColor;  ///< Цвет текста.
    static int m_thickness;     ///< Толщина временной шкалы.
    static int m_textSize;      ///< Высота текста.
    int m_now;                  ///< Текущее время, сек.
    int m_total;                ///< Общая продолжительность выставки, сек.
    QSize m_size;               ///< Размер временной шкалы.

    void drawBg(QPainter *painter) const;
    void drawFrame(QPainter *painter) const;
    void drawNow(QPainter *painter) const;
    void drawLabels(QPainter *painter) const;
}; 
```
